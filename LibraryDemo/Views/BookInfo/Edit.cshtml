@using LibraryDemo.TagHelpers
@model BookListViewModel
@{
    ViewData["Title"] = "Edit";
    int i = 1;
}

<script>
    function confirmDelete() {        
        if (confirm("确定删除?")==true) {
            return true;
        } else {
            return false;
        }
    }
</script>

<style type="text/css">
    tr + tr {
        border-top: thin solid gray;
        padding-top: 20px;
    }

    .container {
        width: 1500px;
    }
</style>


<hr />
@if (TempData["message"] != null)
{
    <tr>@TempData["message"]</tr>
    <br />
    <br />
}
<form class="pull-left" action="@Url.Action("Search")">
    @Html.DropDownList("keyword",new List<SelectListItem>()
    {
        new SelectListItem("书名","Name"),
        new SelectListItem("ISBN","ISBN"),
        new SelectListItem("索书号","FetchBookNumber"),
    })
    <input type="text" name="value"/>
    <button type="submit"><span class="glyphicon glyphicon-search"></span></button>
</form>
<br />
<br />

<form method="post" action="@Url.Action("RemoveBook")">
    <table width="800">
        <tbody>
        <tr>
            <th style="width: 5%"></th>
            <th style="width: 20%">序号</th>
            <th style="width: 45%">标题</th>
            <th style="width: 10%"></th>
            <th style="text-align: right;width: 20%">ISBN</th>
        </tr>
        @foreach (var book in Model.BookDetails)
        {
            <tr>
                <td style="width: 5%"><input type="checkbox" name="isbns" value="@book.ISBN" /></td>
                <td style="width: 20%; padding-left: 10px">@((Model.PagingInfo.CurrentPage-1)*4+i++)</td>
                <td style="width: 45%"><a asp-action="EditBookDetails" asp-route-isbn="@book.ISBN">@book.Name</a></td>
                <td style="width: 10%;"></td>
                <td style="text-align: right; width: 20%">@book.ISBN</td>
            </tr>
        }
        </tbody>
    </table>
    <br/>
    <div>
        <a class="btn btn-primary" href="@Url.Action("AddBookDetails")">添加书籍</a>
        <button type="submit" class="btn btn-danger" onclick="return confirmDelete()"> 删除书籍</button>
    </div>
</form>

<br />
<div class="btn-group pull-right">
    @Html.PageLinks(Model.PagingInfo, x => Url.Action("Edit", new { page = x }))
</div>